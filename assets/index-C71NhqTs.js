var mt=Object.defineProperty;var bt=(e,t,n)=>t in e?mt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ae=(e,t,n)=>bt(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const u of r)if(u.type==="childList")for(const p of u.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&i(p)}).observe(document,{childList:!0,subtree:!0});function n(r){const u={};return r.integrity&&(u.integrity=r.integrity),r.referrerPolicy&&(u.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?u.credentials="include":r.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(r){if(r.ep)return;r.ep=!0;const u=n(r);fetch(r.href,u)}})();function ue(){}function ot(e){return e()}function Ye(){return Object.create(null)}function ie(e){e.forEach(ot)}function st(e){return typeof e=="function"}function be(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function yt(e){return Object.keys(e).length===0}function a(e,t){e.appendChild(t)}function re(e,t,n){e.insertBefore(t,n||null)}function Z(e){e.parentNode&&e.parentNode.removeChild(e)}function kt(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function y(e){return document.createElement(e)}function L(e){return document.createTextNode(e)}function $(){return L(" ")}function x(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function A(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function at(e){return e===""?null:+e}function Ct(e){return Array.from(e.childNodes)}function ae(e,t){t=""+t,e.data!==t&&(e.data=t)}function Ze(e,t){e.value=t??""}function wt(e,t,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:i})}let qe;function Ee(e){qe=e}function ft(){if(!qe)throw new Error("Function called outside component initialization");return qe}function vt(e){ft().$$.after_update.push(e)}function Se(){const e=ft();return(t,n,{cancelable:i=!1}={})=>{const r=e.$$.callbacks[t];if(r){const u=wt(t,n,{cancelable:i});return r.slice().forEach(p=>{p.call(e,u)}),!u.defaultPrevented}return!0}}const he=[],X=[];let _e=[];const Pe=[],Et=Promise.resolve();let Fe=!1;function qt(){Fe||(Fe=!0,Et.then(dt))}function Le(e){_e.push(e)}function te(e){Pe.push(e)}const Oe=new Set;let ge=0;function dt(){if(ge!==0)return;const e=qe;do{try{for(;ge<he.length;){const t=he[ge];ge++,Ee(t),Mt(t.$$)}}catch(t){throw he.length=0,ge=0,t}for(Ee(null),he.length=0,ge=0;X.length;)X.pop()();for(let t=0;t<_e.length;t+=1){const n=_e[t];Oe.has(n)||(Oe.add(n),n())}_e.length=0}while(he.length);for(;Pe.length;)Pe.pop()();Fe=!1,Oe.clear(),Ee(e)}function Mt(e){if(e.fragment!==null){e.update(),ie(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Le)}}function Lt(e){const t=[],n=[];_e.forEach(i=>e.indexOf(i)===-1?t.push(i):n.push(i)),n.forEach(i=>i()),_e=t}const Me=new Set;let se;function Ie(){se={r:0,c:[],p:se}}function ze(){se.r||ie(se.c),se=se.p}function O(e,t){e&&e.i&&(Me.delete(e),e.i(t))}function F(e,t,n,i){if(e&&e.o){if(Me.has(e))return;Me.add(e),se.c.push(()=>{Me.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}else i&&i()}function pe(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function ct(e,t){F(e,1,1,()=>{t.delete(e.key)})}function gt(e,t,n,i,r,u,p,d,o,l,h,c){let s=e.length,b=u.length,m=s;const E={};for(;m--;)E[e[m].key]=m;const N=[],S=new Map,B=new Map,I=[];for(m=b;m--;){const g=c(r,u,m),w=n(g);let R=p.get(w);R?I.push(()=>R.p(g,t)):(R=l(w,g),R.c()),S.set(w,N[m]=R),w in E&&B.set(w,Math.abs(m-E[w]))}const k=new Set,M=new Set;function P(g){O(g,1),g.m(d,h),p.set(g.key,g),h=g.first,b--}for(;s&&b;){const g=N[b-1],w=e[s-1],R=g.key,z=w.key;g===w?(h=g.first,s--,b--):S.has(z)?!p.has(R)||k.has(R)?P(g):M.has(z)?s--:B.get(R)>B.get(z)?(M.add(R),P(g)):(k.add(z),s--):(o(w,p),s--)}for(;s--;){const g=e[s];S.has(g.key)||o(g,p)}for(;b;)P(N[b-1]);return ie(I),N}function ne(e,t,n){const i=e.$$.props[t];i!==void 0&&(e.$$.bound[i]=n,n(e.$$.ctx[i]))}function Y(e){e&&e.c()}function Q(e,t,n){const{fragment:i,after_update:r}=e.$$;i&&i.m(t,n),Le(()=>{const u=e.$$.on_mount.map(ot).filter(st);e.$$.on_destroy?e.$$.on_destroy.push(...u):ie(u),e.$$.on_mount=[]}),r.forEach(Le)}function W(e,t){const n=e.$$;n.fragment!==null&&(Lt(n.after_update),ie(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function St(e,t){e.$$.dirty[0]===-1&&(he.push(e),qt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ye(e,t,n,i,r,u,p=null,d=[-1]){const o=qe;Ee(e);const l=e.$$={fragment:null,ctx:[],props:u,update:ue,not_equal:r,bound:Ye(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(o?o.$$.context:[])),callbacks:Ye(),dirty:d,skip_bound:!1,root:t.target||o.$$.root};p&&p(l.root);let h=!1;if(l.ctx=n?n(e,t.props||{},(c,s,...b)=>{const m=b.length?b[0]:s;return l.ctx&&r(l.ctx[c],l.ctx[c]=m)&&(!l.skip_bound&&l.bound[c]&&l.bound[c](m),h&&St(e,c)),s}):[],l.update(),h=!0,ie(l.before_update),l.fragment=i?i(l.ctx):!1,t.target){if(t.hydrate){const c=Ct(t.target);l.fragment&&l.fragment.l(c),c.forEach(Z)}else l.fragment&&l.fragment.c();t.intro&&O(e.$$.fragment),Q(e,t.target,t.anchor),dt()}Ee(o)}class ke{constructor(){Ae(this,"$$");Ae(this,"$$set")}$destroy(){W(this,1),this.$destroy=ue}$on(t,n){if(!st(n))return ue;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(t){this.$$set&&!yt(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Rt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Rt);const Bt={title:"Pancakes",note:"",instructions:[{description:"Mix the flour and sugar.",ingredients:[{name:"Flour",quantity:300,unit:"g"},{name:"Sugar",quantity:50,unit:"g"}],type:"Preparation",durationMinutes:5},{description:"Add the eggs and mix.",ingredients:[{name:"Eggs",quantity:2,unit:""}],type:"Preparation",durationMinutes:2},{description:"Gradually add the milk while mixing.",ingredients:[{name:"Milk",quantity:300,unit:"ml"}],type:"Preparation",durationMinutes:3},{description:"Melt the butter and add it to the batter.",ingredients:[{name:"Butter",quantity:50,unit:"g"}],type:"Preparation",durationMinutes:2},{description:"Cook the pancakes in a hot pan.",ingredients:[],type:"Cooking",durationMinutes:10}]};function Dt(e){let t,n,i;return{c(){t=y("span"),A(t,"class","editable-text svelte-14ex5ti"),A(t,"data-placeholder",e[1]),A(t,"contenteditable",""),e[0]===void 0&&Le(()=>e[6].call(t))},m(r,u){re(r,t,u),e[0]!==void 0&&(t.innerText=e[0]),n||(i=[x(t,"input",e[6]),x(t,"input",e[2]),x(t,"keydown",e[3]),x(t,"blur",e[4])],n=!0)},p(r,[u]){u&2&&A(t,"data-placeholder",r[1]),u&1&&r[0]!==t.innerText&&(t.innerText=r[0])},i:ue,o:ue,d(r){r&&Z(t),n=!1,ie(i)}}}function Nt(e,t,n){let{text:i}=t,{placeholder:r=""}=t,{isSingleLine:u=!1}=t;const p=Se();function d(s){const b=[];return u&&b.push(E=>E.replace(/\n/g,"")),b.reduce((E,N)=>N(E),s)}function o(s){const m=s.target.innerText,E=d(m);p("textChanged",{text:E})}function l(s){if(s.key==="Escape"||u&&s.key==="Enter"){s.preventDefault(),s.target.blur();return}}function h(){p("blur",{text:i})}function c(){i=this.innerText,n(0,i),n(5,u)}return e.$$set=s=>{"text"in s&&n(0,i=s.text),"placeholder"in s&&n(1,r=s.placeholder),"isSingleLine"in s&&n(5,u=s.isSingleLine)},e.$$.update=()=>{e.$$.dirty&33&&u&&n(0,i=d(i))},[i,r,o,l,h,u,c]}class me extends ke{constructor(t){super(),ye(this,t,Nt,Dt,be,{text:0,placeholder:1,isSingleLine:5})}}function $t(e){let t,n,i,r=(e[0]??"")+"",u,p,d;return{c(){t=y("span"),n=y("input"),i=y("span"),u=L(r),A(n,"type","number"),A(n,"min",e[1]),A(n,"max",e[2]),A(n,"class","svelte-hx2uzv"),A(i,"class","svelte-hx2uzv"),A(t,"class","editable-number svelte-hx2uzv")},m(o,l){re(o,t,l),a(t,n),Ze(n,e[0]),a(t,i),a(i,u),p||(d=[x(n,"input",e[4]),x(n,"keydown",At),x(n,"blur",e[3])],p=!0)},p(o,[l]){l&2&&A(n,"min",o[1]),l&4&&A(n,"max",o[2]),l&1&&at(n.value)!==o[0]&&Ze(n,o[0]),l&1&&r!==(r=(o[0]??"")+"")&&ae(u,r)},i:ue,o:ue,d(o){o&&Z(t),p=!1,ie(d)}}}function At(e){if(e.key==="Escape"){e.preventDefault(),e.target.blur();return}}function Ot(e,t,n){let{value:i}=t,{min:r=Number.MIN_SAFE_INTEGER}=t,{max:u=Number.MAX_SAFE_INTEGER}=t;const p=Se();function d(){p("blur",{value:i})}function o(){i=at(this.value),n(0,i)}return e.$$set=l=>{"value"in l&&n(0,i=l.value),"min"in l&&n(1,r=l.min),"max"in l&&n(2,u=l.max)},[i,r,u,d,o]}class ht extends ke{constructor(t){super(),ye(this,t,Ot,$t,be,{value:0,min:1,max:2})}}function Pt(e){let t,n,i,r,u,p,d,o,l,h,c,s,b;function m(k){e[3](k)}let E={placeholder:"Ingredient...",isSingleLine:!0};e[0].name!==void 0&&(E.text=e[0].name),r=new me({props:E}),X.push(()=>ne(r,"text",m)),r.$on("textChanged",e[4]),r.$on("blur",e[2]);function N(k){e[5](k)}let S={};e[0].quantity!==void 0&&(S.value=e[0].quantity),d=new ht({props:S}),X.push(()=>ne(d,"value",N)),d.$on("blur",e[2]);function B(k){e[6](k)}let I={placeholder:"x",isSingleLine:!0};return e[0].unit!==void 0&&(I.text=e[0].unit),l=new me({props:I}),X.push(()=>ne(l,"text",B)),l.$on("textChanged",e[7]),l.$on("blur",e[2]),{c(){t=y("div"),n=y("button"),n.textContent="×",i=$(),Y(r.$$.fragment),p=L(` : \r
  `),Y(d.$$.fragment),Y(l.$$.fragment),A(t,"class","ingredient")},m(k,M){re(k,t,M),a(t,n),a(t,i),Q(r,t,null),a(t,p),Q(d,t,null),Q(l,t,null),c=!0,s||(b=x(n,"click",e[1]),s=!0)},p(k,[M]){const P={};!u&&M&1&&(u=!0,P.text=k[0].name,te(()=>u=!1)),r.$set(P);const g={};!o&&M&1&&(o=!0,g.value=k[0].quantity,te(()=>o=!1)),d.$set(g);const w={};!h&&M&1&&(h=!0,w.text=k[0].unit,te(()=>h=!1)),l.$set(w)},i(k){c||(O(r.$$.fragment,k),O(d.$$.fragment,k),O(l.$$.fragment,k),c=!0)},o(k){F(r.$$.fragment,k),F(d.$$.fragment,k),F(l.$$.fragment,k),c=!1},d(k){k&&Z(t),W(r),W(d),W(l),s=!1,b()}}}function Ft(e,t,n){let{ingredient:i}=t;const r=Se();function u(){r("buttonRemoveClicked",{ingredient:i})}function p(){r("history",{ingredient:i})}function d(s){e.$$.not_equal(i.name,s)&&(i.name=s,n(0,i))}const o=s=>n(0,i.name=s.detail.text,i);function l(s){e.$$.not_equal(i.quantity,s)&&(i.quantity=s,n(0,i))}function h(s){e.$$.not_equal(i.unit,s)&&(i.unit=s,n(0,i))}const c=s=>n(0,i.unit=s.detail.text,i);return e.$$set=s=>{"ingredient"in s&&n(0,i=s.ingredient)},[i,u,p,d,o,l,h,c]}class It extends ke{constructor(t){super(),ye(this,t,Ft,Pt,be,{ingredient:0})}}function et(e,t,n){const i=e.slice();return i[20]=t[n],i[21]=t,i[22]=n,i}function tt(e){let t,n=[],i=new Map,r,u=pe(e[0].ingredients);const p=d=>d[22];for(let d=0;d<u.length;d+=1){let o=et(e,u,d),l=p(o);i.set(l,n[d]=nt(l,o))}return{c(){t=y("ul");for(let d=0;d<n.length;d+=1)n[d].c();A(t,"class","ingredients")},m(d,o){re(d,t,o);for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(t,null);r=!0},p(d,o){o&769&&(u=pe(d[0].ingredients),Ie(),n=gt(n,o,p,1,d,u,i,t,ct,nt,null,et),ze())},i(d){if(!r){for(let o=0;o<u.length;o+=1)O(n[o]);r=!0}},o(d){for(let o=0;o<n.length;o+=1)F(n[o]);r=!1},d(d){d&&Z(t);for(let o=0;o<n.length;o+=1)n[o].d()}}}function nt(e,t){let n,i,r,u,p;function d(h){t[17](h,t[20],t[21],t[22])}function o(){return t[18](t[22])}let l={};return t[20]!==void 0&&(l.ingredient=t[20]),i=new It({props:l}),X.push(()=>ne(i,"ingredient",d)),i.$on("buttonRemoveClicked",o),i.$on("history",t[9]),{key:e,first:null,c(){n=y("li"),Y(i.$$.fragment),u=$(),this.first=n},m(h,c){re(h,n,c),Q(i,n,null),a(n,u),p=!0},p(h,c){t=h;const s={};!r&&c&1&&(r=!0,s.ingredient=t[20],te(()=>r=!1)),i.$set(s)},i(h){p||(O(i.$$.fragment,h),p=!0)},o(h){F(i.$$.fragment,h),p=!1},d(h){h&&Z(n),W(i)}}}function zt(e){let t,n,i,r,u,p,d,o,l,h,c,s,b,m,E,N,S,B,I,k,M,P,g,w,R,z;function f(C){e[12](C)}let q={placeholder:"Instruction...",isSingleLine:!0};e[0].type!==void 0&&(q.text=e[0].type),m=new me({props:q}),X.push(()=>ne(m,"text",f)),m.$on("textChanged",e[13]),m.$on("blur",e[9]);function j(C){e[14](C)}let K={min:0,max:999};e[0].durationMinutes!==void 0&&(K.value=e[0].durationMinutes),S=new ht({props:K}),X.push(()=>ne(S,"value",j)),S.$on("blur",e[9]);function le(C){e[15](C)}let fe={placeholder:"Description..."};e[0].description!==void 0&&(fe.text=e[0].description),M=new me({props:fe}),X.push(()=>ne(M,"text",le)),M.$on("textChanged",e[16]),M.$on("blur",e[9]);let D=e[0].ingredients.length>0&&tt(e);return{c(){t=y("div"),n=y("button"),i=L("↑"),r=$(),u=y("button"),p=L("↓"),d=$(),o=y("button"),o.textContent="×",l=$(),h=y("button"),c=L("+"),s=$(),b=y("strong"),Y(m.$$.fragment),N=L(" ("),Y(S.$$.fragment),I=L(" minutes)"),k=L(`\r
   : `),Y(M.$$.fragment),g=$(),D&&D.c(),n.disabled=e[1],u.disabled=e[2],h.disabled=e[3],A(t,"class","instruction")},m(C,H){re(C,t,H),a(t,n),a(n,i),a(t,r),a(t,u),a(u,p),a(t,d),a(t,o),a(t,l),a(t,h),a(h,c),a(t,s),a(t,b),Q(m,b,null),a(b,N),Q(S,b,null),a(b,I),a(t,k),Q(M,t,null),a(t,g),D&&D.m(t,null),w=!0,R||(z=[x(n,"click",e[4]),x(u,"click",e[5]),x(o,"click",e[10]),x(h,"click",e[11])],R=!0)},p(C,[H]){(!w||H&2)&&(n.disabled=C[1]),(!w||H&4)&&(u.disabled=C[2]),(!w||H&8)&&(h.disabled=C[3]);const Ce={};!E&&H&1&&(E=!0,Ce.text=C[0].type,te(()=>E=!1)),m.$set(Ce);const oe={};!B&&H&1&&(B=!0,oe.value=C[0].durationMinutes,te(()=>B=!1)),S.$set(oe);const V={};!P&&H&1&&(P=!0,V.text=C[0].description,te(()=>P=!1)),M.$set(V),C[0].ingredients.length>0?D?(D.p(C,H),H&1&&O(D,1)):(D=tt(C),D.c(),O(D,1),D.m(t,null)):D&&(Ie(),F(D,1,1,()=>{D=null}),ze())},i(C){w||(O(m.$$.fragment,C),O(S.$$.fragment,C),O(M.$$.fragment,C),O(D),w=!0)},o(C){F(m.$$.fragment,C),F(S.$$.fragment,C),F(M.$$.fragment,C),F(D),w=!1},d(C){C&&Z(t),W(m),W(S),W(M),D&&D.d(),R=!1,ie(z)}}}function Tt(e,t,n){let i,{instruction:r}=t,{isFirst:u}=t,{isLast:p}=t;const d=Se();function o(){d("buttonUpClicked",{instruction:r})}function l(){d("buttonDownClicked",{instruction:r})}function h(){d("buttonRemoveClicked",{instruction:r})}function c(){n(0,r.ingredients=[...r.ingredients,{name:"",quantity:0,unit:""}],r),b()}function s(g){g<0||g>=r.ingredients.length||(n(0,r.ingredients=r.ingredients.filter((w,R)=>R!==g),r),b())}function b(){d("history",{instruction:r})}const m=()=>h(),E=()=>c();function N(g){e.$$.not_equal(r.type,g)&&(r.type=g,n(0,r))}const S=g=>n(0,r.type=g.detail.text,r);function B(g){e.$$.not_equal(r.durationMinutes,g)&&(r.durationMinutes=g,n(0,r))}function I(g){e.$$.not_equal(r.description,g)&&(r.description=g,n(0,r))}const k=g=>n(0,r.description=g.detail.text,r);function M(g,w,R,z){R[z]=g,n(0,r)}const P=g=>s(g);return e.$$set=g=>{"instruction"in g&&n(0,r=g.instruction),"isFirst"in g&&n(1,u=g.isFirst),"isLast"in g&&n(2,p=g.isLast)},e.$$.update=()=>{e.$$.dirty&1&&n(3,i=r.ingredients.some(g=>!g.name||!g.quantity))},[r,u,p,i,o,l,h,c,s,b,m,E,N,S,B,I,k,M,P]}class Ut extends ke{constructor(t){super(),ye(this,t,Tt,zt,be,{instruction:0,isFirst:1,isLast:2})}}function it(e,t,n){const i=e.slice();return i[24]=t[n],i[25]=t,i[26]=n,i}function rt(e,t,n){const i=e.slice();return i[27]=t[n],i}function lt(e){let t,n=e[27].name+"",i,r,u=e[27].quantity+"",p,d=(e[27].unit??"")+"",o;return{c(){t=y("li"),i=L(n),r=L(" : "),p=L(u),o=L(d)},m(l,h){re(l,t,h),a(t,i),a(t,r),a(t,p),a(t,o)},p(l,h){h&128&&n!==(n=l[27].name+"")&&ae(i,n),h&128&&u!==(u=l[27].quantity+"")&&ae(p,u),h&128&&d!==(d=(l[27].unit??"")+"")&&ae(o,d)},d(l){l&&Z(t)}}}function ut(e,t){let n,i,r,u;function p(c){t[20](c,t[24],t[25],t[26])}function d(){return t[21](t[26])}function o(){return t[22](t[26])}function l(){return t[23](t[26])}let h={isFirst:t[26]<=0,isLast:t[26]>=t[1].length-1};return t[24]!==void 0&&(h.instruction=t[24]),i=new Ut({props:h}),X.push(()=>ne(i,"instruction",p)),i.$on("buttonUpClicked",d),i.$on("buttonDownClicked",o),i.$on("buttonRemoveClicked",l),i.$on("history",t[15]),{key:e,first:null,c(){n=y("p"),Y(i.$$.fragment),this.first=n},m(c,s){re(c,n,s),Q(i,n,null),u=!0},p(c,s){t=c;const b={};s&2&&(b.isFirst=t[26]<=0),s&2&&(b.isLast=t[26]>=t[1].length-1),!r&&s&2&&(r=!0,b.instruction=t[24],te(()=>r=!1)),i.$set(b)},i(c){u||(O(i.$$.fragment,c),u=!0)},o(c){F(i.$$.fragment,c),u=!1},d(c){c&&Z(n),W(i)}}}function xt(e){let t,n,i,r,u,p,d,o,l,h,c,s,b,m,E,N,S,B,I,k,M,P,g,w,R,z,f,q,j,K,le,fe,D,C,H,Ce,oe,V,Re,Te,Be,Ue,we,xe,De,je,G=[],He=new Map,Ne,de,Ve,ee,$e,Ge;function pt(_){e[16](_)}let Ke={placeholder:"Insert the title of the recipe...",isSingleLine:!0};e[0].title!==void 0&&(Ke.text=e[0].title),c=new me({props:Ke}),X.push(()=>ne(c,"text",pt)),c.$on("textChanged",e[17]),c.$on("blur",e[15]);function _t(_){e[18](_)}let Je={placeholder:"Insert a note about the recipe..."};e[0].note!==void 0&&(Je.text=e[0].note),V=new me({props:Je}),X.push(()=>ne(V,"text",_t)),V.$on("textChanged",e[19]),V.$on("blur",e[15]);let ce=pe(e[7]),T=[];for(let _=0;_<ce.length;_+=1)T[_]=lt(rt(e,ce,_));let ve=pe(e[1]);const Xe=_=>_[24];for(let _=0;_<ve.length;_+=1){let v=it(e,ve,_),U=Xe(v);He.set(U,G[_]=ut(U,v))}return{c(){t=y("div"),n=y("button"),i=L("Undo"),u=$(),p=y("button"),d=L("Redo"),l=$(),h=y("h1"),Y(c.$$.fragment),b=$(),m=y("p"),E=y("span"),N=y("strong"),N.textContent="Total time",S=L(" : "),B=L(e[3]),I=L(" minutes"),k=$(),M=y("br"),P=$(),g=y("span"),w=y("strong"),w.textContent="Preparation time",R=L(" : "),z=L(e[2]),f=L(" minutes"),q=$(),j=y("br"),K=$(),le=y("span"),fe=y("strong"),fe.textContent="Cooking time",D=L(" : "),C=L(e[8]),H=L(" minutes"),Ce=$(),oe=y("p"),Y(V.$$.fragment),Te=$(),Be=y("h2"),Be.textContent="Ingredients",Ue=$(),we=y("ul");for(let _=0;_<T.length;_+=1)T[_].c();xe=$(),De=y("h2"),De.textContent="Instructions",je=$();for(let _=0;_<G.length;_+=1)G[_].c();Ne=$(),de=y("button"),Ve=L("Add an instruction"),n.disabled=r=e[5]<=0,p.disabled=o=e[5]>=e[4].length-1,A(h,"class","recipe-title svelte-1hi0279"),A(oe,"class","recipe-note svelte-1hi0279"),A(we,"class","ingredients"),de.disabled=e[6],A(t,"class","recipe svelte-1hi0279")},m(_,v){re(_,t,v),a(t,n),a(n,i),a(t,u),a(t,p),a(p,d),a(t,l),a(t,h),Q(c,h,null),a(t,b),a(t,m),a(m,E),a(E,N),a(E,S),a(E,B),a(E,I),a(m,k),a(m,M),a(m,P),a(m,g),a(g,w),a(g,R),a(g,z),a(g,f),a(m,q),a(m,j),a(m,K),a(m,le),a(le,fe),a(le,D),a(le,C),a(le,H),a(t,Ce),a(t,oe),Q(V,oe,null),a(t,Te),a(t,Be),a(t,Ue),a(t,we);for(let U=0;U<T.length;U+=1)T[U]&&T[U].m(we,null);a(t,xe),a(t,De),a(t,je);for(let U=0;U<G.length;U+=1)G[U]&&G[U].m(t,null);a(t,Ne),a(t,de),a(de,Ve),ee=!0,$e||(Ge=[x(n,"click",e[9]),x(p,"click",e[10]),x(de,"click",e[14])],$e=!0)},p(_,[v]){(!ee||v&32&&r!==(r=_[5]<=0))&&(n.disabled=r),(!ee||v&48&&o!==(o=_[5]>=_[4].length-1))&&(p.disabled=o);const U={};!s&&v&1&&(s=!0,U.text=_[0].title,te(()=>s=!1)),c.$set(U),(!ee||v&8)&&ae(B,_[3]),(!ee||v&4)&&ae(z,_[2]),(!ee||v&256)&&ae(C,_[8]);const Qe={};if(!Re&&v&1&&(Re=!0,Qe.text=_[0].note,te(()=>Re=!1)),V.$set(Qe),v&128){ce=pe(_[7]);let J;for(J=0;J<ce.length;J+=1){const We=rt(_,ce,J);T[J]?T[J].p(We,v):(T[J]=lt(We),T[J].c(),T[J].m(we,null))}for(;J<T.length;J+=1)T[J].d(1);T.length=ce.length}v&47106&&(ve=pe(_[1]),Ie(),G=gt(G,v,Xe,1,_,ve,He,t,ct,ut,Ne,it),ze()),(!ee||v&64)&&(de.disabled=_[6])},i(_){if(!ee){O(c.$$.fragment,_),O(V.$$.fragment,_);for(let v=0;v<ve.length;v+=1)O(G[v]);ee=!0}},o(_){F(c.$$.fragment,_),F(V.$$.fragment,_);for(let v=0;v<G.length;v+=1)F(G[v]);ee=!1},d(_){_&&Z(t),W(c),W(V),kt(T,_);for(let v=0;v<G.length;v+=1)G[v].d();$e=!1,ie(Ge)}}}function jt(e,t,n){let i,r,u,p,d,o,{recipe:l}=t,h=[structuredClone(l)],c=0;function s(){c<=0||(n(5,c--,c),n(0,l=structuredClone(h[c])))}function b(){c>=h.length-1||(n(5,c++,c),n(0,l=structuredClone(h[c])))}function m(f){if(f<=0||f>=i.length)return;const q=i[f];n(1,i[f]=i[f-1],i),n(1,i[f-1]=q,i),B()}function E(f){if(f<0||f>=i.length-1)return;const q=i[f];n(1,i[f]=i[f+1],i),n(1,i[f+1]=q,i),B()}function N(f){f<0||f>=i.length||(n(0,l.instructions=i.filter((q,j)=>j!==f),l),B())}function S(){n(0,l.instructions=[...i,{type:"",durationMinutes:0,description:"",ingredients:[]}],l),B()}vt(()=>{console.log("Recipe updated",l)});function B(){const f=h[c];if(JSON.stringify(f)!==JSON.stringify(l)){for(const q of i)q.ingredients=q.ingredients.toSorted((j,K)=>j.name.localeCompare(K.name));n(4,h=[...h.slice(0,c+1),structuredClone(l)]),n(5,c++,c),n(0,l=structuredClone(l))}}setInterval(()=>{console.log("History",h)},5e3);function I(f){e.$$.not_equal(l.title,f)&&(l.title=f,n(0,l))}const k=f=>n(0,l.title=f.detail.text,l);function M(f){e.$$.not_equal(l.note,f)&&(l.note=f,n(0,l))}const P=f=>n(0,l.note=f.detail.text,l);function g(f,q,j,K){j[K]=f,n(1,i),n(0,l)}const w=f=>m(f),R=f=>E(f),z=f=>N(f);return e.$$set=f=>{"recipe"in f&&n(0,l=f.recipe)},e.$$.update=()=>{e.$$.dirty&1&&n(1,i=l.instructions),e.$$.dirty&2&&n(3,r=i.map(f=>f.durationMinutes).filter(Number.isInteger).reduce((f,q)=>f+q,0)),e.$$.dirty&2&&n(2,u=i.filter(f=>f.type.normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"").toLowerCase()==="preparation").map(f=>f.durationMinutes).filter(Number.isInteger).reduce((f,q)=>f+q,0)),e.$$.dirty&12&&n(8,p=r-u),e.$$.dirty&2&&n(7,d=i.flatMap(f=>f.ingredients).reduce((f,q)=>{if(!q.name&&!q.quantity)return f;const j=f.find(K=>K.name===q.name&&K.unit===q.unit);return j?j.quantity+=q.quantity:f.push({...q}),f},[]).sort((f,q)=>f.name.localeCompare(q.name))),e.$$.dirty&2&&n(6,o=i.some(f=>!f.type||!f.description))},[l,i,u,r,h,c,o,d,p,s,b,m,E,N,S,B,I,k,M,P,g,w,R,z]}class Ht extends ke{constructor(t){super(),ye(this,t,jt,xt,be,{recipe:0})}}function Vt(e){let t,n,i;return n=new Ht({props:{recipe:Bt}}),{c(){t=y("main"),Y(n.$$.fragment),A(t,"class","svelte-qh46hl")},m(r,u){re(r,t,u),Q(n,t,null),i=!0},p:ue,i(r){i||(O(n.$$.fragment,r),i=!0)},o(r){F(n.$$.fragment,r),i=!1},d(r){r&&Z(t),W(n)}}}class Gt extends ke{constructor(t){super(),ye(this,t,null,Vt,be,{})}}new Gt({target:document.getElementById("app")});
